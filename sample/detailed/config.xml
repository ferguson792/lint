<?xml version="1.0" encoding="UTF-8"?>
<lint>
    <debug-output>true</debug-output>

    <quarantine>
        <sql-injection>
            <detector type="dummy"/>
        </sql-injection>
        <prompt-injection>
            <detector type="blacklist">
                <!-- At least one of a blacklist or a whitelist are required. -->
                <list ref="prompt-injection-blacklist.txt"/>
            </detector>
        </prompt-injection>
    </quarantine>

    <harmonization>
        <sources>
        </sources>
        
        <items>
        </items>
    </harmonization>

    <briefing>
        <parameters>
            <!-- The viewback time frame (from the current moment), in milliseconds. -->
            <viewback-ms>172800000<!-- 48 hours = 1000*60*60*48 ms --></viewback-ms>

            <!-- Ignoring the publication date might be useful if such dates are faulty, for some reason. -->
            <ignore-publication-date>true</ignore-publication-date>
            <!-- Ignoring processing status might be desirable when something went wrong with the last brief. -->
            <!-- Ignoring this status means all source items are gathered for the brief, even if they have already been processed. -->
            <!-- (In the future, this might even become a flag, or processing status might be removed altogether.) -->
            <ignore-processing-status>true</ignore-processing-status>

            <!-- 'join-with' describes by which character individual topics should be combined into one large topic. -->
            <topics join-with=" or ">
                <topic description="disinformation" relevance-threshold="0"/>
            </topics>
        </parameters>

        <relevance>
            <processor type="lm-based">
                <model type="mistral-online">
                    <property key="auth-token">2bmkOa3v3vA4vzDzpRVDx2OLt6kKOc1k<!-- INSERT API KEY HERE --></property>
                    <property key="name">open-mistral-nemo</property>
                    <property key="temperature">0.5</property>
                </model>

                <!-- Default value of regex is "false", in which case the character sequence is used to split score from context. -->
                <context-separator regex="true">\$+?</context-separator>

                <prompt>Do the following articles relate to <insert-topic/>? Only provide a number between 0 and 100 as an answer. 0 means the article does not relate to <insert-topic/> at all. 100 means <insert-topic/> is fully covered in the article. Provide an explanation after three $$$ dollar signs.</prompt>
            </processor>
        </relevance>

        <categorization>
            <processor type="sentence-transformer">
                <model type="all-MiniLM-L6-v2"/>
            </processor>
        </categorization>

        <!-- The following types are available: lm-based, dummy -->
        <summary>
            <processor type="lm-based">
                <head>
                    <model type="mistral-online">
                        <property key="auth-token">2bmkOa3v3vA4vzDzpRVDx2OLt6kKOc1k<!-- INSERT API KEY HERE --></property>
                        <property key="name">open-mistral-nemo</property>
                        <property key="temperature">0.5</property>
                    </model>

                    <prompt>Provide a headline in the BLUF (Bottom Line Up Front) format for the following summary article. The headline should be concise, informative, and capture the essence of the article's main point.</prompt>
                </head>

                <body>
                    <model type="mistral-online">
                        <property key="auth-token">2bmkOa3v3vA4vzDzpRVDx2OLt6kKOc1k<!-- INSERT API KEY HERE --></property>
                        <property key="name">open-mistral-nemo</property>
                        <property key="temperature">0.5</property>
                    </model>

                    <prompt>Summarize the following articles with a focus on <topic-insert/>.</prompt>
                </body>
            </processor>
        </summary>
    </briefing>
</lint>
